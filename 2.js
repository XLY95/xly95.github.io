(function(_0x20812c,_0x493f47){const _0x5b39bb=_0x1e33,_0x1000c2=_0x20812c();while(!![]){try{const _0xf3e4a=parseInt(_0x5b39bb(0xd7))/0x1+parseInt(_0x5b39bb(0xe7))/0x2+-parseInt(_0x5b39bb(0xc6))/0x3*(parseInt(_0x5b39bb(0xea))/0x4)+-parseInt(_0x5b39bb(0xdf))/0x5*(-parseInt(_0x5b39bb(0xe5))/0x6)+-parseInt(_0x5b39bb(0xd0))/0x7*(-parseInt(_0x5b39bb(0xc8))/0x8)+-parseInt(_0x5b39bb(0xe0))/0x9+-parseInt(_0x5b39bb(0xe1))/0xa;if(_0xf3e4a===_0x493f47)break;else _0x1000c2['push'](_0x1000c2['shift']());}catch(_0x68a548){_0x1000c2['push'](_0x1000c2['shift']());}}}(_0x3b7d,0xb1f40));let backgroundZoom=0x1,backgroundPanX=0x0,backgroundPanY=0x0,isPanning=![],lastPanX=0x0,lastPanY=0x0,lastTouchDistance=0x0;function resetCropStates(){backgroundZoom=0x1,backgroundPanX=0x0,backgroundPanY=0x0,isPanning=![],lastPanX=0x0,lastPanY=0x0;}function removeEventListeners(){const _0x362da4=_0x1e33;canvas[_0x362da4(0xef)](_0x362da4(0xd6),handleBackgroundZoom),canvas[_0x362da4(0xef)](_0x362da4(0xed),handleBackgroundPanStart),canvas[_0x362da4(0xef)](_0x362da4(0xdb),handleBackgroundPan),canvas[_0x362da4(0xef)]('mouseup',handleBackgroundPanEnd),canvas[_0x362da4(0xef)]('mouseleave',handleBackgroundPanEnd),canvas[_0x362da4(0xef)](_0x362da4(0xf1),handleTouchStart),canvas['removeEventListener'](_0x362da4(0xcb),handleTouchMove),canvas['removeEventListener'](_0x362da4(0xcf),handleBackgroundPanEnd),canvas[_0x362da4(0xef)](_0x362da4(0xdc),handleBackgroundPanEnd);}function _0x1e33(_0x3a3a61,_0x33c9a5){const _0x3b7d11=_0x3b7d();return _0x1e33=function(_0x1e33ee,_0x5d1470){_0x1e33ee=_0x1e33ee-0xc3;let _0x34aadf=_0x3b7d11[_0x1e33ee];return _0x34aadf;},_0x1e33(_0x3a3a61,_0x33c9a5);}function isCropMode(){const _0x547357=_0x1e33;return canvas['parentNode'][_0x547357(0xf4)][_0x547357(0xd1)]('crop');}function exitCropMode(){const _0x1225c4=_0x1e33;removeEventListeners(),canvas[_0x1225c4(0xeb)]['classList'][_0x1225c4(0xd9)](_0x1225c4(0xf2)),setCanvasTitle('');}function initializeCrop(){const _0xe85a84=_0x1e33,_0x2b8115=document[_0xe85a84(0xcd)]('imageFile');if(_0x2b8115[_0xe85a84(0xcc)]['length']==0x0){fillCanvas(_0xe85a84(0xfa));return;}resetCropStates(),removeEventListeners(),canvas[_0xe85a84(0xca)][_0xe85a84(0xf8)]=_0xe85a84(0xfb)+URL[_0xe85a84(0xf7)](_0x2b8115[_0xe85a84(0xcc)][0x0])+')',canvas[_0xe85a84(0xca)][_0xe85a84(0xde)]=_0xe85a84(0xce),canvas[_0xe85a84(0xca)]['backgroundPosition']='',canvas[_0xe85a84(0xca)][_0xe85a84(0xe3)]='no-repeat',canvas[_0xe85a84(0xc4)]('wheel',handleBackgroundZoom),canvas[_0xe85a84(0xc4)](_0xe85a84(0xed),handleBackgroundPanStart),canvas[_0xe85a84(0xc4)](_0xe85a84(0xdb),handleBackgroundPan),canvas[_0xe85a84(0xc4)](_0xe85a84(0xf6),handleBackgroundPanEnd),canvas[_0xe85a84(0xc4)](_0xe85a84(0xf0),handleBackgroundPanEnd),canvas[_0xe85a84(0xc4)](_0xe85a84(0xf1),handleTouchStart),canvas[_0xe85a84(0xc4)](_0xe85a84(0xcb),handleTouchMove),canvas['addEventListener'](_0xe85a84(0xcf),handleBackgroundPanEnd),canvas[_0xe85a84(0xc4)](_0xe85a84(0xdc),handleBackgroundPanEnd),ctx[_0xe85a84(0xd4)](0x0,0x0,canvas[_0xe85a84(0xe6)],canvas[_0xe85a84(0xd5)]),setCanvasTitle('裁剪模式:\x20可用鼠标或触摸缩放移动图片'),canvas[_0xe85a84(0xeb)][_0xe85a84(0xf4)][_0xe85a84(0xec)]('crop');}function finishCrop(){redrawTextElements(),redrawLineSegments(),convertDithering();}function handleTouchStart(_0x4c8c6b){const _0x1c6bfc=_0x1e33;_0x4c8c6b[_0x1c6bfc(0xd2)]();if(_0x4c8c6b[_0x1c6bfc(0xf3)]['length']===0x1)handleBackgroundPanStart(_0x4c8c6b[_0x1c6bfc(0xf3)][0x0]);else _0x4c8c6b[_0x1c6bfc(0xf3)]['length']===0x2&&(isPanning=![],lastTouchDistance=getTouchDistance(_0x4c8c6b[_0x1c6bfc(0xf3)]));}function handleTouchMove(_0x38f452){const _0x11dc95=_0x1e33;_0x38f452[_0x11dc95(0xd2)]();if(isPanning&&_0x38f452[_0x11dc95(0xf3)][_0x11dc95(0xc9)]===0x1)handleBackgroundPan(_0x38f452['touches'][0x0]);else{if(_0x38f452[_0x11dc95(0xf3)]['length']===0x2){const _0x5443a6=getTouchDistance(_0x38f452[_0x11dc95(0xf3)]);if(lastTouchDistance>0x0){const _0x32039a=_0x5443a6/lastTouchDistance;backgroundZoom*=_0x32039a,backgroundZoom=Math[_0x11dc95(0xe8)](0.1,Math[_0x11dc95(0xc5)](0x5,backgroundZoom)),updateBackgroundTransform();}lastTouchDistance=_0x5443a6;}}}function handleBackgroundZoom(_0x266ebc){const _0x335d2d=_0x1e33;_0x266ebc[_0x335d2d(0xd2)]();const _0x127346=_0x266ebc[_0x335d2d(0xe2)]>0x0?0.9:1.1;backgroundZoom*=_0x127346,backgroundZoom=Math[_0x335d2d(0xe8)](0.1,Math[_0x335d2d(0xc5)](0x5,backgroundZoom)),updateBackgroundTransform();}function handleBackgroundPanStart(_0x325d6c){const _0x4deb44=_0x1e33;isPanning=!![],lastPanX=_0x325d6c[_0x4deb44(0xf5)],lastPanY=_0x325d6c[_0x4deb44(0xda)],canvas['style']['cursor']='grabbing';}function handleBackgroundPan(_0xbfbe94){const _0x229487=_0x1e33;if(isPanning){const _0x427976=_0xbfbe94[_0x229487(0xf5)]-lastPanX,_0x32c983=_0xbfbe94[_0x229487(0xda)]-lastPanY;backgroundPanX+=_0x427976,backgroundPanY+=_0x32c983,lastPanX=_0xbfbe94[_0x229487(0xf5)],lastPanY=_0xbfbe94['clientY'],updateBackgroundTransform();}}function handleBackgroundPanEnd(){const _0x10100e=_0x1e33;isPanning=![],lastTouchDistance=0x0,canvas[_0x10100e(0xca)]['cursor']=_0x10100e(0xf9);}function updateBackgroundTransform(){const _0x36af6d=_0x1e33;canvas['style'][_0x36af6d(0xde)]=0x64*backgroundZoom+'%',canvas[_0x36af6d(0xca)][_0x36af6d(0xdd)]=backgroundPanX+'px\x20'+backgroundPanY+'px';}function _0x3b7d(){const _0x46a281=['1175110UCgscb','sqrt','remove','clientY','mousemove','touchcancel','backgroundPosition','backgroundSize','225hfCOPp','9455247maZNqz','19840470JSrHuX','deltaY','backgroundRepeat','pow','26538UPONac','width','2858796DKhxRU','max','crop-move-up','787756ubyjum','parentNode','add','mousedown','crop-zoom-in','removeEventListener','mouseleave','touchstart','crop','touches','classList','clientX','mouseup','createObjectURL','backgroundImage','grab','white','url(','click','addEventListener','min','6CErtzo','crop-move-left','264168oZMGlb','length','style','touchmove','files','getElementById','100%','touchend','287SOSNTo','contains','preventDefault','crop-move-right','clearRect','height','wheel'];_0x3b7d=function(){return _0x46a281;};return _0x3b7d();}function getTouchDistance(_0x34fa77){const _0x303438=_0x1e33,_0x10fb4d=_0x34fa77[0x0],_0x25df40=_0x34fa77[0x1];return Math[_0x303438(0xd8)](Math['pow'](_0x25df40['clientX']-_0x10fb4d['clientX'],0x2)+Math[_0x303438(0xe4)](_0x25df40[_0x303438(0xda)]-_0x10fb4d[_0x303438(0xda)],0x2));}function initCropTools(){const _0x164081=_0x1e33;document['getElementById'](_0x164081(0xee))[_0x164081(0xc4)](_0x164081(0xc3),_0x19a3dc=>{const _0xfe4a07=_0x164081;_0x19a3dc[_0xfe4a07(0xd2)](),handleBackgroundZoom({'preventDefault':()=>{},'deltaY':-0x1});}),document[_0x164081(0xcd)]('crop-zoom-out')['addEventListener'](_0x164081(0xc3),_0x1e5658=>{const _0x2b8e70=_0x164081;_0x1e5658[_0x2b8e70(0xd2)](),handleBackgroundZoom({'preventDefault':()=>{},'deltaY':0x1});}),document[_0x164081(0xcd)](_0x164081(0xc7))[_0x164081(0xc4)](_0x164081(0xc3),_0x35d70d=>{const _0x334e4f=_0x164081;_0x35d70d[_0x334e4f(0xd2)](),backgroundPanX-=0xa,updateBackgroundTransform();}),document[_0x164081(0xcd)](_0x164081(0xd3))[_0x164081(0xc4)](_0x164081(0xc3),_0x2034c4=>{const _0x8dbd37=_0x164081;_0x2034c4[_0x8dbd37(0xd2)](),backgroundPanX+=0xa,updateBackgroundTransform();}),document[_0x164081(0xcd)](_0x164081(0xe9))[_0x164081(0xc4)](_0x164081(0xc3),_0x1da855=>{const _0xe7434d=_0x164081;_0x1da855[_0xe7434d(0xd2)](),backgroundPanY-=0xa,updateBackgroundTransform();}),document[_0x164081(0xcd)]('crop-move-down')['addEventListener'](_0x164081(0xc3),_0xf62aa4=>{_0xf62aa4['preventDefault'](),backgroundPanY+=0xa,updateBackgroundTransform();});}