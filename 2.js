(function(_0x12ffbf,_0x5a94b6){const _0x16568f=_0x5615,_0x2abd16=_0x12ffbf();while(!![]){try{const _0x52f39b=-parseInt(_0x16568f(0xe0))/0x1*(-parseInt(_0x16568f(0xdb))/0x2)+-parseInt(_0x16568f(0xf7))/0x3+-parseInt(_0x16568f(0x10b))/0x4*(parseInt(_0x16568f(0xda))/0x5)+parseInt(_0x16568f(0xd6))/0x6+parseInt(_0x16568f(0xd0))/0x7*(-parseInt(_0x16568f(0xd9))/0x8)+parseInt(_0x16568f(0xec))/0x9+parseInt(_0x16568f(0xe8))/0xa*(-parseInt(_0x16568f(0xfd))/0xb);if(_0x52f39b===_0x5a94b6)break;else _0x2abd16['push'](_0x2abd16['shift']());}catch(_0x4853a6){_0x2abd16['push'](_0x2abd16['shift']());}}}(_0x5d89,0x9f958));let backgroundZoom=0x1,backgroundPanX=0x0,backgroundPanY=0x0,isPanning=![],lastPanX=0x0,lastPanY=0x0,lastTouchDistance=0x0;function resetCropStates(){backgroundZoom=0x1,backgroundPanX=0x0,backgroundPanY=0x0,isPanning=![],lastPanX=0x0,lastPanY=0x0;}function removeEventListeners(){const _0x2988cf=_0x5615;canvas['removeEventListener'](_0x2988cf(0xd2),handleBackgroundZoom),canvas[_0x2988cf(0x102)](_0x2988cf(0xd3),handleBackgroundPanStart),canvas[_0x2988cf(0x102)](_0x2988cf(0xd8),handleBackgroundPan),canvas[_0x2988cf(0x102)](_0x2988cf(0xf6),handleBackgroundPanEnd),canvas[_0x2988cf(0x102)](_0x2988cf(0xeb),handleBackgroundPanEnd),canvas['removeEventListener'](_0x2988cf(0xcf),handleTouchStart),canvas[_0x2988cf(0x102)](_0x2988cf(0xdf),handleTouchMove),canvas[_0x2988cf(0x102)]('touchend',handleBackgroundPanEnd),canvas[_0x2988cf(0x102)](_0x2988cf(0xf4),handleBackgroundPanEnd);}function isCropMode(){const _0x1fe68d=_0x5615;return canvas['parentNode'][_0x1fe68d(0xfb)][_0x1fe68d(0xdc)](_0x1fe68d(0x10c));}function exitCropMode(){const _0x24401b=_0x5615;removeEventListeners(),canvas[_0x24401b(0x109)][_0x24401b(0xfb)][_0x24401b(0x104)]('crop'),setCanvasTitle('');}function initializeCrop(){const _0xa9592a=_0x5615,_0x3636ce=document[_0xa9592a(0xd5)](_0xa9592a(0xf8));if(_0x3636ce[_0xa9592a(0xe1)][_0xa9592a(0xdd)]==0x0){fillCanvas(_0xa9592a(0x106));return;}resetCropStates(),removeEventListeners(),canvas[_0xa9592a(0xf0)][_0xa9592a(0xfa)]=_0xa9592a(0x10d)+URL['createObjectURL'](_0x3636ce[_0xa9592a(0xe1)][0x0])+')',canvas['style']['backgroundSize']=_0xa9592a(0x105),canvas['style'][_0xa9592a(0xce)]='',canvas[_0xa9592a(0xf0)][_0xa9592a(0xde)]=_0xa9592a(0xe5),canvas[_0xa9592a(0x101)]('wheel',handleBackgroundZoom),canvas[_0xa9592a(0x101)]('mousedown',handleBackgroundPanStart),canvas['addEventListener'](_0xa9592a(0xd8),handleBackgroundPan),canvas[_0xa9592a(0x101)]('mouseup',handleBackgroundPanEnd),canvas[_0xa9592a(0x101)]('mouseleave',handleBackgroundPanEnd),canvas[_0xa9592a(0x101)](_0xa9592a(0xcf),handleTouchStart),canvas[_0xa9592a(0x101)](_0xa9592a(0xdf),handleTouchMove),canvas[_0xa9592a(0x101)](_0xa9592a(0xe9),handleBackgroundPanEnd),canvas[_0xa9592a(0x101)](_0xa9592a(0xf4),handleBackgroundPanEnd),ctx[_0xa9592a(0x108)](0x0,0x0,canvas[_0xa9592a(0xd1)],canvas[_0xa9592a(0xe2)]),setCanvasTitle(_0xa9592a(0xf2)),canvas[_0xa9592a(0x109)][_0xa9592a(0xfb)]['add'](_0xa9592a(0x10c));}function finishCrop(){const _0x2817d2=_0x5615,_0x54e606=document[_0x2817d2(0xd5)](_0x2817d2(0xf8));if(_0x54e606[_0x2817d2(0xe1)][_0x2817d2(0xdd)]==0x0)return;const _0x3a2bed=new Image();_0x3a2bed[_0x2817d2(0xe7)]=function(){const _0x4f8553=_0x2817d2;URL[_0x4f8553(0xe3)](this[_0x4f8553(0xfe)]);const _0x19fb41=canvas['getBoundingClientRect'](),_0x136c96=_0x3a2bed[_0x4f8553(0xd1)]/_0x19fb41[_0x4f8553(0xd1)]/backgroundZoom,_0x1e0f30=-backgroundPanX*_0x136c96,_0x4f271f=-backgroundPanY*_0x136c96,_0x3dda18=_0x19fb41[_0x4f8553(0xd1)]*_0x136c96,_0xac85d0=_0x19fb41['height']*_0x136c96;fillCanvas(_0x4f8553(0x106)),ctx[_0x4f8553(0xf3)](_0x3a2bed,_0x1e0f30,_0x4f271f,_0x3dda18,_0xac85d0,0x0,0x0,canvas[_0x4f8553(0xd1)],canvas[_0x4f8553(0xe2)]),redrawTextElements(),redrawLineSegments(),convertDithering(),exitCropMode();},_0x3a2bed[_0x2817d2(0xfe)]=URL[_0x2817d2(0x10e)](_0x54e606[_0x2817d2(0xe1)][0x0]);}function _0x5d89(){const _0x3afa29=['max','onload','1335340GPgaSE','touchend','cursor','mouseleave','11403216VxBKQO','px\x20','touches','click','style','grab','裁剪模式:\x20可用鼠标或触摸缩放移动图片','drawImage','touchcancel','crop-move-right','mouseup','1274241XMtjup','imageFile','pow','backgroundImage','classList','crop-move-left','55vTbWnZ','src','sqrt','min','addEventListener','removeEventListener','crop-move-down','remove','100%','white','clientY','clearRect','parentNode','crop-zoom-out','532PFixnU','crop','url(','createObjectURL','backgroundPosition','touchstart','7uWvZNT','width','wheel','mousedown','clientX','getElementById','2431254eNkbTY','preventDefault','mousemove','2249856fAgfCt','9270ovCkcS','76RwtOqA','contains','length','backgroundRepeat','touchmove','15833HCJaKp','files','height','revokeObjectURL','grabbing','no-repeat'];_0x5d89=function(){return _0x3afa29;};return _0x5d89();}function handleTouchStart(_0x11c170){const _0x5c3c6e=_0x5615;_0x11c170['preventDefault']();if(_0x11c170[_0x5c3c6e(0xee)][_0x5c3c6e(0xdd)]===0x1)handleBackgroundPanStart(_0x11c170[_0x5c3c6e(0xee)][0x0]);else _0x11c170[_0x5c3c6e(0xee)]['length']===0x2&&(isPanning=![],lastTouchDistance=getTouchDistance(_0x11c170[_0x5c3c6e(0xee)]));}function handleTouchMove(_0x545f68){const _0x192a66=_0x5615;_0x545f68[_0x192a66(0xd7)]();if(isPanning&&_0x545f68[_0x192a66(0xee)][_0x192a66(0xdd)]===0x1)handleBackgroundPan(_0x545f68[_0x192a66(0xee)][0x0]);else{if(_0x545f68['touches'][_0x192a66(0xdd)]===0x2){const _0x2d234d=getTouchDistance(_0x545f68[_0x192a66(0xee)]);if(lastTouchDistance>0x0){const _0x390559=_0x2d234d/lastTouchDistance;backgroundZoom*=_0x390559,backgroundZoom=Math['max'](0.1,Math['min'](0x5,backgroundZoom)),updateBackgroundTransform();}lastTouchDistance=_0x2d234d;}}}function handleBackgroundZoom(_0x5b4f05){const _0x4fb29b=_0x5615;_0x5b4f05[_0x4fb29b(0xd7)]();const _0x1d1383=_0x5b4f05['deltaY']>0x0?0.9:1.1;backgroundZoom*=_0x1d1383,backgroundZoom=Math[_0x4fb29b(0xe6)](0.1,Math[_0x4fb29b(0x100)](0x5,backgroundZoom)),updateBackgroundTransform();}function _0x5615(_0x1b1a22,_0x4d373b){const _0x5d893b=_0x5d89();return _0x5615=function(_0x561549,_0x486d75){_0x561549=_0x561549-0xce;let _0x1b0b89=_0x5d893b[_0x561549];return _0x1b0b89;},_0x5615(_0x1b1a22,_0x4d373b);}function handleBackgroundPanStart(_0x46d20c){const _0x1f0e74=_0x5615;isPanning=!![],lastPanX=_0x46d20c[_0x1f0e74(0xd4)],lastPanY=_0x46d20c['clientY'],canvas[_0x1f0e74(0xf0)][_0x1f0e74(0xea)]=_0x1f0e74(0xe4);}function handleBackgroundPan(_0x61d418){const _0x5e4504=_0x5615;if(isPanning){const _0x1d274d=_0x61d418[_0x5e4504(0xd4)]-lastPanX,_0x42a629=_0x61d418[_0x5e4504(0x107)]-lastPanY;backgroundPanX+=_0x1d274d,backgroundPanY+=_0x42a629,lastPanX=_0x61d418[_0x5e4504(0xd4)],lastPanY=_0x61d418['clientY'],updateBackgroundTransform();}}function handleBackgroundPanEnd(){const _0x79b9bc=_0x5615;isPanning=![],lastTouchDistance=0x0,canvas[_0x79b9bc(0xf0)][_0x79b9bc(0xea)]=_0x79b9bc(0xf1);}function updateBackgroundTransform(){const _0x3a568e=_0x5615;canvas[_0x3a568e(0xf0)]['backgroundSize']=0x64*backgroundZoom+'%',canvas['style'][_0x3a568e(0xce)]=backgroundPanX+_0x3a568e(0xed)+backgroundPanY+'px';}function getTouchDistance(_0x55bda5){const _0xe6b5c9=_0x5615,_0x4f6ab4=_0x55bda5[0x0],_0x5e10da=_0x55bda5[0x1];return Math[_0xe6b5c9(0xff)](Math[_0xe6b5c9(0xf9)](_0x5e10da['clientX']-_0x4f6ab4[_0xe6b5c9(0xd4)],0x2)+Math[_0xe6b5c9(0xf9)](_0x5e10da[_0xe6b5c9(0x107)]-_0x4f6ab4['clientY'],0x2));}function initCropTools(){const _0x59e82c=_0x5615;document[_0x59e82c(0xd5)]('crop-zoom-in')[_0x59e82c(0x101)](_0x59e82c(0xef),_0x11ced2=>{const _0x476b95=_0x59e82c;_0x11ced2[_0x476b95(0xd7)](),handleBackgroundZoom({'preventDefault':()=>{},'deltaY':-0x1});}),document[_0x59e82c(0xd5)](_0x59e82c(0x10a))['addEventListener']('click',_0x110f9e=>{const _0x19e13e=_0x59e82c;_0x110f9e[_0x19e13e(0xd7)](),handleBackgroundZoom({'preventDefault':()=>{},'deltaY':0x1});}),document[_0x59e82c(0xd5)](_0x59e82c(0xfc))[_0x59e82c(0x101)]('click',_0x437fac=>{const _0xc4576f=_0x59e82c;_0x437fac[_0xc4576f(0xd7)](),backgroundPanX-=0xa,updateBackgroundTransform();}),document['getElementById'](_0x59e82c(0xf5))[_0x59e82c(0x101)](_0x59e82c(0xef),_0x45a6df=>{const _0xd4d573=_0x59e82c;_0x45a6df[_0xd4d573(0xd7)](),backgroundPanX+=0xa,updateBackgroundTransform();}),document[_0x59e82c(0xd5)]('crop-move-up')[_0x59e82c(0x101)](_0x59e82c(0xef),_0xbcb7d7=>{const _0x45de44=_0x59e82c;_0xbcb7d7[_0x45de44(0xd7)](),backgroundPanY-=0xa,updateBackgroundTransform();}),document[_0x59e82c(0xd5)](_0x59e82c(0x103))['addEventListener'](_0x59e82c(0xef),_0x4b8b35=>{const _0x597926=_0x59e82c;_0x4b8b35[_0x597926(0xd7)](),backgroundPanY+=0xa,updateBackgroundTransform();});}