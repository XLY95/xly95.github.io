<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport"content="width=device-width, initial-scale=1"><title>NRF墨水屏</title><link rel="stylesheet"href="css.css"></head><body><div class="main"><h3>NRF墨水屏</h3><fieldset><legend>蓝牙连接</legend><div class="flex-container"><div class="flex-group"><button id="connectbutton"type="button"class="primary"onclick="preConnect()">连接</button><button id="reconnectbutton"type="button"class="secondary"onclick="reConnect()">重连</button><button type="button"class="secondary"onclick="clearLog()">清空</button></div><div class="flex-group right debug"><input style="display: none;"type="text"id="cmdTXT"value=""><button style="display: none;"id="sendcmdbutton"type="button"class="primary"onclick="sendcmd()"></button></div><div class="flex-group right "><label for="epddriver">屏幕：</label><select id="epddriver"><option value="02"data-color="threeColor"data-size="4.2_400_300">SSD开头芯片(三色)</option><option value="04"data-color="blackWhiteColor"data-size="4.2_400_300">SSD开头芯片(黑白)</option><option value="01"data-color="blackWhiteColor"data-size="4.2_400_300">UC开头芯片(黑白)</option><option value="03"data-color="threeColor"data-size="4.2_400_300">UC开头芯片(三色)</option></select></div><div class="flex-group right "><label>激活：</label><input id="epdpins"type="text"value=""><button id="setDriverbutton"type="button"class="primary"onclick="set_EPD_CMD_J_H()">确认</button></div></div><div id="log"></div></fieldset><fieldset><legend>设备控制</legend><div class="flex-container"><div class="flex-group"><button id="calendarmodebutton"type="button"class="primary"onclick="syncTime(1)">日历模式</button><button id="clockmodebutton"type="button"class="primary"onclick="syncTime(2)">时钟模式</button><button id="clockmodebutton"type="button"class="primary"onclick="syncTime(4)">数码管时钟</button><button id="clearscreenbutton"type="button"class="secondary"onclick="clearScreen()">清除屏幕</button></div></fieldset><fieldset><legend>四连设置</legend><fieldset><legend>主副机设置</legend><button id="setDriverbutton"type="button"class="primary"onclick="set_EPD_CMD_4_ZF(0)">主机零</button><button id="setDriverbutton"type="button"class="primary"onclick="set_EPD_CMD_4_ZF(1)">副机一</button><button id="setDriverbutton"type="button"class="primary"onclick="set_EPD_CMD_4_ZF(2)">副机二</button><button id="setDriverbutton"type="button"class="primary"onclick="set_EPD_CMD_4_ZF(3)">副机三</button></fieldset><div class="flex-group right "><label for="fanxian1">是否反显:</label><select id="fanxian1"><option value="01">否</option><option value="00">是</option></select><label for="xuanzhuan1">旋转屏幕:</label><select id="xuanzhuan1"><option value="00">否</option><option value="01">是</option></select><label for="silian_ziti">字体:</label><select id="silian_ziti"><option value="00">数码</option><option value="01">衬线</option></select></div><div class="flex-group right "><label for="xianshi_peizhi">电量&MAC:</label><select id="xianshi_peizhi"><option value="00">否</option><option value="01">是</option></select><label for="moshi_id">模式选择:</label><select id="moshi_id"><option value="02">时钟模式</option><option value="01">日历模式</option><option value="03">温度模式</option></select></div><div class="flex-group right "><label for="color_11">显示红色:</label><select id="color_11"><option value="00">否</option><option value="01">是</option></select><label>局刷时长:<label><input type="range"min="2"max="50"step="2"value="2"id="jushua_time1"></div><button id="setDriverbutton"type="button"class="primary"onclick="set_EPD_CMD_4_MS()">确认</button></fieldset><fieldset><legend>显示设置</legend><div class="flex-group right "><label for="fanxian">是否反显:</label><select id="fanxian"><option value="01">否</option><option value="00">是</option></select><label for="xuanzhuan">旋转屏幕:</label><select id="xuanzhuan"><option value="00">否</option><option value="01">是</option></select></div><div class="flex-group right "><label for="qiangzhi_shuaxing">强制刷新:</label><select id="qiangzhi_shuaxing"><option value="00">否</option><option value="01">是</option></select><label>黑色局刷时长:<label><input type="range"min="1"max="6"step="1"value="1"id="jushua_time"></div><button id="setDriverbutton"type="button"class="primary"onclick="set_EPD_CMD_MY()">确认</button></fieldset><fieldset><legend>时钟颜色设置</legend><div class="flex-group right "><label for="color_1">显示红色:</label><select id="color_1"><option value="00">否</option><option value="01">是</option></select><label for="time_color">时钟红否:</label><select id="time_color"><option value="00">否</option><option value="01">是</option></select></div><div class="flex-group right "><label for="wendu_color">温度红否:</label><select id="wendu_color"><option value="00">否</option><option value="01">是</option></select><label for="gongli_color">公历红否:</label><select id="gongli_color"><option value="00">否</option><option value="01">是</option></select></div><div class="flex-group right "><label for="shichen_color">时辰红否:</label><select id="shichen_color"><option value="00">否</option><option value="01">是</option></select><label for="jieqi_color">节气红否:</label><select id="jieqi_color"><option value="00">否</option><option value="01">是</option></select></div><div class="flex-group right "><div class="flex-group"><label>红色局刷时长:<label><input type="range"min="2"max="50"step="2"value="2"id="r_jushua_time"></div><button id="setDriverbutton"type="button"class="primary"onclick="set_EPD_CMD_COLOR()">确认</button></fieldset><fieldset><legend>LED设置</legend><div class="flex-group right "><label for="color_led">选择颜色:</label><select id="color_led"><option value="00">红色</option><option value="01">绿色</option><option value="02">红色</option><option value="03">白色</option><option value="04">黄色</option><option value="05">紫色</option><option value="06">天蓝</option></select></div><div class="flex-group"><label>频率时长:<label><input type="range"min="0"max="80"step="1"value="0"id="liang_time"><label>闪烁频率</label><input type="number"id="liang_add"value="0"min="0"max="10"></div><div class="flex-group"><label>LED明暗:</label><input type="number"id="liangdu"value="1"min="1"max="10"><label>长亮时长:</label><input type="range"id="liang_s"value="1"min="1"max="250"></div><button id="setDriverbutton"type="button"class="primary"onclick="set_EPD_CMD_LED()">确认</button><button id="setDriverbutton"type="button"class="primary"onclick="set_EPD_CMD_LED1()">四联全部确认</button></fieldset><fieldset><legend>闹钟设置</legend><div class="flex-group "><div class="flex-group right "><label for="N_Z_start">闹钟:</label><select id="N_Z_start"><option value="00">关闭</option><option value="01">开启</option></select><label>小时:</label><input type="number"id="N_Z_hour"value="0"min="0"max="23"><label>分钟:</label><input type="number"id="N_Z_min"value="0"min="0"max="59"><button id="setDriverbutton"type="button"class="primary"onclick="set_EPD_CMD_N_Z()">确认</button></div><div class="flex-group "><div class="flex-group right "><label for="D_S_start">定时:</label><select id="D_S_start"><option value="00">关闭</option><option value="01">开启</option></select><label>小时:</label><input type="number"id="D_S_hour"value="0"min="0"max="23"><label>分钟:</label><input type="number"id="D_S_min"value="0"min="0"max="59"><button id="setDriverbutton"type="button"class="primary"onclick="set_EPD_CMD_D_S()">确认</button></div><div class="flex-group "><div class="flex-group right "><label for="J_S_start">计时:</label><select id="J_S_start"><option value="00">关闭</option><option value="01">开启</option></select><label>小时:</label><input type="number"id="J_S_hour"value="0"min="0"max="23"><label>分钟:</label><input type="number"id="J_S_min"value="0"min="0"max="59"><button id="setDriverbutton"type="button"class="primary"onclick="set_EPD_CMD_J_S()">确认</button></div></fieldset><fieldset><legend>蓝牙传图</legend><div class="flex-container"><input type="file"id="imageFile"accept=".png,.jpg,.bmp,.webp,.jpeg"></div><div class="flex-container options"><div class="flex-group"><label for="canvasSize">画布尺寸:</label><select id="canvasSize"><!--<option value="1.54_152_152">1.54(152x152)</option><option value="1.54_200_200">1.54(200x200)</option>--><option value="2.13_212_104">2.13(212x104)</option><option value="2.13_250_122">2.13(250x122)</option><!--<option value="2.66_296_152">2.66(296x152)</option>--><option value="2.9_296_128">2.9(296x128)</option><!--<option value="2.9_384_168">2.9(384x168)</option><option value="3.5_384_184">3.5(384x184)</option><option value="3.7_416_240">3.7(416x240)</option><option value="3.97_800_480">3.97(800x480)</option>--><option value="4.2_400_300"selected>4.2(400x300)</option><option value="7.5_800_480">7.5(800x480)</option><!--<option value="5.79_792_272">5.79(792x272)</option><option value="7.5_800_480">7.5(800x480)</option><option value="10.2_960_640">10.2(960x640)</option><option value="10.85_1360_480">10.85(1360x480)</option><option value="11.6_960_640">11.6(960x640)</option><option value="4E_600_400">4E(600x400)</option><option value="7.3E6">7.3E6(480x800)</option>--></select><label for="ditherMode">颜色模式:</label><select id="ditherMode"><option value="blackWhiteColor">双色(黑白)</option><option value="threeColor">三色(黑白红)</option><!--<option value="fourColor">四色(黑白红黄)</option><option value="sixColor">六色(黑白红黄蓝绿)</option>--></select></div><div class="flex-group"><label for="ditherAlg">抖动算法:</label><select id="ditherAlg"><option value="floydSteinberg">Floyd-Steinberg</option><option value="atkinson">Atkinson</option><option value="bayer">Bayer</option><option value="stucki">Stucki</option><option value="jarvis">Jarvis-Judice-Ninke</option></select></div><div class="flex-group"><label for="ditherStrength">抖动强度:</label><input type="range"min="0"max="5"step="0.1"value="1.0"id="ditherStrength"><label id="ditherStrengthValue">1.0</label><label for="ditherContrast">对比度:</label><input type="range"min="0.5"max="2"step="0.1"value="1.2"id="ditherContrast"><label id="ditherContrastValue">1.2</label></div></div><div class="flex-container options"><div class="flex-group "><label for="mtusize">MTU:</label><input type="number"id="mtusize"value="20"min="0"max="255"><label for="interleavedcount">确认间隔:</label><input type="number"id="interleavedcount"value="50"min="0"max="500"></div></div><div class="status-bar"><b>状态：</b><span id="status"></span></div><div class="flex-container"><div class="flex-group"><button type="button"class="secondary "onclick="rotateCanvas()">旋转画布</button><button type="button"class="secondary"onclick="clearCanvas()">清除画布</button><button type="button"class="secondary"onclick="rotateImage(-90)">逆时针旋转</button><button type="button"class="secondary"onclick="rotateImage(90)">顺时针旋转</button><button type="button"class="secondary "onclick="downloadDataArray()">下载数组</button><button id="sendimgbutton"type="button"class="primary"onclick="sendimg()">发送图片</button></div></div><div class="canvas-container"><div class="canvas-title"></div><canvas id="canvas"width="400"height="300"></canvas><div class="flex-container canvas-tools"><div class="flex-group tool-buttons"><button id="brush-mode"title="画笔"class="tool-button">✏️</button><button id="eraser-mode"title="橡皮擦"class="tool-button">🧽</button><button id="text-mode"title="添加文字"class="tool-button">T</button></div><div class="flex-group brush-tools"><label for="brush-color">画笔和文字颜色:</label><select id="brush-color"><option value="#000000">黑色</option><option value="#FF0000">红色</option><option value="#FFFFFF">白色</option></select><label for="brush-size">画笔粗细:</label><input type="number"id="brush-size"value="16"min="1"max="100"></div></div><div class="flex-container canvas-tools"><div class="flex-group text-tools"><label for="font-family">文字字体:</label><select id="font-family"><option value="Arial">Arial</option><option value="sans-serif">Sans-serif</option><option value="monospace">Monospace</option><option value="SimSun">宋体</option><option value="SimHei">黑体</option><option value="Microsoft Yahei">微软雅黑</option><option value="Microsoft JhengHei">微软正黑体</option><option value="KaiTi">楷体</option><option value="NSimSun">新宋体</option><option value="FangSong">仿宋</option><option value="YouYuan">幼圆</option><option value="LiSu">隶书</option><option value="STHeiti">华文黑体</option><option value="STXihei">华文细黑</option><option value="STKaiti">华文楷体</option><option value="STSong">华文宋体</option><option value="STFangsong">华文仿宋</option><option value="STZhongsong">华文中宋</option><option value="STHupo">华文琥珀</option><option value="STXinwei">华文新魏</option><option value="STLiti">华文隶书</option><option value="STXingkai">华文行楷</option><option value="FZShuTi">方正舒体</option><option value="FZYaoti">方正姚体</option><option value="PingFang SC">苹方</option><option value="Source Han Sans CN">思源黑体</option><option value="Source Han Serif SC">思源宋体</option><option value="WenQuanYi Micro Hei">文泉驿微米黑</option></optgroup></select><label for="font-size">文字大小:</label><input type="number"id="font-size"value="16"min="1"max="100"></div><div class="flex-group text-tools"><label>请输入文字:<input type="text"id="text-input"placeholder="输入文字"style="width:150px"></label><button id="text-bold"title="粗体">B</button><button id="text-italic"title="斜体">I</button><button id="add-text-btn"class="primary">添加文字</button></div><div class="flex-group crop-tools"><button id="crop-zoom-in"title="放大"class="secondary">+</button><button id="crop-zoom-out"title="缩小"class="secondary">-</button><button id="crop-move-left"title="左移">⇦</button><button id="crop-move-up"title="上移">⇧</button><button id="crop-move-down"title="下移">⇩</button><button id="crop-move-right"title="右移">⇨</button><button class="primary"onclick="finishCrop()">完成</button></div></div></div></fieldset></div><script type="text/javascript"src="3.js"></script><script type="text/javascript"src="2.js"></script><script type="text/javascript"src="1.js"></script><script type="text/javascript"src="js.js"></script></body></html>
